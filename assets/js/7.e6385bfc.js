(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{307:function(e,t,a){"use strict";a(171),a(10),a(308),a(312),a(313),a(63),a(92),a(314),a(90);var r=a(315),n=a.n(r);t.a={data:function(){return{zeroAddress:"0x0000000000000000000000000000000000000000"}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},methods:{getParam:function(e){var t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(e,a,r){t[a]=void 0!==r?r:""})),e?t[e]?t[e]:null:t},ethGetCall:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return a.push({from:this.dapp.fallbackAddress}),this.promisify.apply(this,[e].concat(a))},promisify:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return new Promise((function(t,r){e.apply(void 0,a.concat([function(e,a){e?r(e):t(a)}]))}))},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}},generateQRCode:function(e){return n.a.toDataURL(e,{color:{dark:"#b733a7",light:"#0000"}})},makeToast:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:a,solid:!0})},formatStructure:function(e){return 0===parseInt(e[0].valueOf())?null:{id:parseInt(e[0].valueOf()),address:e[1],fingerprint:this.formatFingerprint(e[2]),creationDate:1e3*e[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(e[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(e[5])),data:e[6],approved:e[7]}},formatFingerprint:function(e){var t=e.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#".concat(t[0]),backgroundColor:"#".concat(t[1]),mainColor:"#".concat(t[2])}}}}},309:function(e,t,a){"use strict";var r=a(1),n=a(310);r({target:"String",proto:!0,forced:a(311)("link")},{link:function(e){return n(this,"a","href",e)}})},310:function(e,t,a){var r=a(25),n=/"/g;e.exports=function(e,t,a,o){var s=String(r(e)),i="<"+t;return""!==a&&(i+=" "+a+'="'+String(o).replace(n,"&quot;")+'"'),i+">"+s+"</"+t+">"}},311:function(e,t,a){var r=a(2);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},364:function(e,t,a){"use strict";a.r(t);a(91),a(308),a(312),a(309),a(64);var r=a(20),n={name:"Dao",mixins:[a(307).a],data:function(){return{loading:!0,pagination:{page:1,limit:12},memberList:[],token:{name:"",symbol:"",decimals:18,link:"",logo:""},dao:{membersNumber:0,totalStakedTokens:0,totalUsedTokens:0},account:{isMember:!1}}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},mounted:function(){this.memberId=this.getParam("id"),this.initDapp()},methods:{initDapp:function(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDao"),this.ready()}catch(e){this.makeToast("Some errors occurred",e,"danger"),this.$router.push({path:"/"})}},ready:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDaoData();case 2:return t.next=4,e.getTokenData();case 4:return e.loading=!1,t.next=7,e.getMember(e.dao.membersNumber);case 7:case"end":return t.stop()}}),t)})))()},loadMore:function(){this.pagination.page++,this.getMember(this.dao.membersNumber-this.memberList.length)},getDaoData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=parseInt,t.next=4,e.ethGetCall(e.dapp.instances.dao.membersNumber);case 4:return t.t1=t.sent.valueOf(),e.dao.membersNumber=(0,t.t0)(t.t1),t.t2=parseFloat,t.t3=e.dapp.web3,t.next=10,e.ethGetCall(e.dapp.instances.dao.totalStakedTokens);case 10:return t.t4=t.sent,t.t5=t.t3.fromWei.call(t.t3,t.t4),e.dao.totalStakedTokens=(0,t.t2)(t.t5),t.t6=parseFloat,t.t7=e.dapp.web3,t.next=17,e.ethGetCall(e.dapp.instances.dao.totalUsedTokens);case 17:if(t.t8=t.sent,t.t9=t.t7.fromWei.call(t.t7,t.t8),e.dao.totalUsedTokens=(0,t.t6)(t.t9),!e.dapp.metamask.address){t.next=24;break}return t.next=23,e.ethGetCall(e.dapp.instances.dao.isMember,e.dapp.metamask.address);case 23:e.account.isMember=t.sent;case 24:t.next=31;break;case 26:t.prev=26,t.t10=t.catch(0),console.log(t.t10),e.makeToast("Some errors occurred",t.t10,"danger"),e.loading=!1;case 31:case"end":return t.stop()}}),t,null,[[0,26]])})))()},getTokenData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ethGetCall(e.dapp.instances.token.name);case 3:return e.token.name=t.sent,t.next=6,e.ethGetCall(e.dapp.instances.token.symbol);case 6:e.token.symbol=t.sent,e.token.link=e.dapp.network.current.etherscanLink+"/token/"+e.dapp.instances.token.address,e.token.logo=e.$withBase("/assets/images/logo/shaka_logo_white.png"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),e.loading=!1,console.log(t.t0),e.makeToast("Some errors occurred",t.t0,"danger");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getMember:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.ethGetCall(t.dapp.instances.dao.getMemberById,e);case 2:r=a.sent,n=t.formatStructure(r),t.memberList.push(n),t.memberList.length%(t.pagination.limit*t.pagination.page)!=0&&t.memberList.length<t.dao.membersNumber&&t.getMember(t.dao.membersNumber-t.memberList.length);case 6:case"end":return a.stop()}}),a)})))()}}},o=a(41),s=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("b-row",{staticClass:"masthead m-4"},[a("b-col",{attrs:{lg:"8","offset-lg":"2"}},[a("h1",{staticClass:"display-5"},[a("b-img",{attrs:{src:e.$withBase("/assets/images/logo/friendsfingers.svg"),rounded:"circle",height:"64",alt:e.$site.title}}),e._v(" "),a("br"),e._v("\n                FriendsFingers DAO\n            ")],1),e._v(" "),e.loading?e._e():[e.account.isMember?e._e():a("b-btn",{staticClass:"my-2",attrs:{to:e.$withBase("/dashboard"),variant:"primary",size:"lg"}},[e._v("\n                    Join DAO\n                ")]),e._v(" "),a("h4",{staticClass:"text-muted"},[a("b",[e._v(e._s(e.dao.membersNumber))]),e._v(" DAO Members"),a("br"),e._v(" "),a("b",[e._v(e._s(e.dao.totalStakedTokens)+" "+e._s(e.token.symbol))]),e._v(" Staked"),a("br"),e._v(" "),e.dao.totalUsedTokens>0?[a("b",[e._v(e._s(e.dao.totalUsedTokens)+" "+e._s(e.token.symbol))]),e._v(" Used\n                    ")]:e._e()],2)]],2)],1),e._v(" "),e.loading?[a("ui--loader",{attrs:{loading:!0}})]:a("b-row",[a("b-col",{attrs:{lg:"10","offset-lg":"1"}},[a("b-row",{staticClass:"mt-2"},e._l(e.memberList,(function(t){return a("b-col",{key:t.id,staticClass:"p-2",attrs:{md:"2",sm:"4",cols:"6"}},[a("b-card",{attrs:{"no-body":""}},[a("b-card-body",[a("b-link",{attrs:{to:{path:"/member/",query:{ref:t.address}}}},[a("ui--member-image",{attrs:{member:t}})],1)],1),e._v(" "),a("b-card-footer",[e._v("\n                            #"+e._s(t.id)+"\n\n                            "),a("div",{staticClass:"float-right"},[t.approved?a("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-1",attrs:{title:"Verified",variant:"success",pill:""}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}})],1):e._e()],1)])],1)],1)})),1),e._v(" "),e.memberList.length<e.dao.membersNumber?a("b-row",{staticClass:"my-5"},[a("b-col",{staticClass:"text-center",attrs:{md:"12"}},[a("b-btn",{attrs:{variant:"outline-primary",size:"lg"},on:{click:e.loadMore}},[e._v("\n                        Load more\n                    ")])],1)],1):e._e()],1)],1)],2)}),[],!1,null,null,null);t.default=s.exports}}]);