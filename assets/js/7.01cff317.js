(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{255:function(t,a,e){"use strict";e(49);var s=e(256),n=e.n(s);a.a={data:()=>({zeroAddress:"0x0000000000000000000000000000000000000000"}),computed:{dapp:{get(){return this.$store.getters.dapp}}},methods:{getParam(t){const a={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(t,e,s){a[e]=void 0!==s?s:""})),t?a[t]?a[t]:null:a},ethGetCall(t,...a){return a.push({from:this.dapp.fallbackAddress}),this.promisify(t,...a)},promisify:(t,...a)=>new Promise((e,s)=>{t(...a,(t,a)=>{t?s(t):e(a)})}),isMobile(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}},generateQRCode:t=>n.a.toDataURL(t,{color:{dark:"#b733a7",light:"#0000"}}),makeToast(t,a,e=null){this.$bvToast.toast(a,{title:t,variant:e,solid:!0})},formatStructure(t){return 0===parseInt(t[0].valueOf())?null:{id:parseInt(t[0].valueOf()),address:t[1],fingerprint:this.formatFingerprint(t[2]),creationDate:1e3*t[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(t[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(t[5])),data:t[6],approved:t[7]}},formatFingerprint(t){const a=t.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#"+a[0],backgroundColor:"#"+a[1],mainColor:"#"+a[2]}}}}},295:function(t,a,e){"use strict";e.r(a);var s={name:"Dashboard",mixins:[e(255).a],data:()=>({loading:!0,loadingData:!1,makingTransaction:!1,trx:{hash:"",link:""},token:{name:"",symbol:"",decimals:18,link:"",logo:""},account:{isMember:!1,memberId:0,tokenBalance:0,member:null}}),computed:{dapp:{get(){return this.$store.getters.dapp}}},mounted(){this.initDapp()},methods:{initDapp(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDao"),this.ready()}catch(t){this.makeToast("Some errors occurred",t,"danger"),document.location.href=this.$withBase("/")}},async ready(){await this.getTokenData(),await this.getAccountData(),this.loading=!1},async enable(){this.$store.dispatch("connect")},async getTokenData(){try{this.token.name=await this.ethGetCall(this.dapp.instances.token.name),this.token.symbol=await this.ethGetCall(this.dapp.instances.token.symbol),this.token.link=this.dapp.network.current.etherscanLink+"/token/"+this.dapp.instances.token.address,this.token.logo=this.$withBase("/assets/images/logo/shaka_logo_white.png")}catch(t){console.log(t),this.loading=!1,this.makeToast("Some errors occurred",t,"danger")}},async getAccountData(){this.loadingData=!0;try{if(this.account.isMember=await this.ethGetCall(this.dapp.instances.dao.isMember,this.dapp.metamask.address),this.account.isMember){const t=await this.ethGetCall(this.dapp.instances.dao.getMemberByAddress,this.dapp.metamask.address);this.account.member=this.formatStructure(t),this.account.memberId=this.account.member.id}this.account.tokenBalance=parseFloat(this.dapp.web3.fromWei(await this.ethGetCall(this.dapp.instances.token.balanceOf,this.dapp.metamask.address))).toFixed(2),this.loadingData=!1}catch(t){console.log(t),this.makeToast("Some errors occurred",t,"danger"),this.loadingData=!1}},join(){try{this.makingTransaction=!0,this.dapp.instances.dao.join({from:this.dapp.metamask.address,to:this.dapp.instances.dao.address},(t,a)=>{t?(console.log(t),this.makeToast("Some errors occurred","Maybe you rejected the transaction or you have MetaMask locked!","danger")):(this.trx.hash=a,this.trx.link=this.dapp.network.current.etherscanLink+"/tx/"+this.trx.hash),this.makingTransaction=!1})}catch(t){console.log(t),this.makingTransaction=!1,this.makeToast("Cannot connect","Please verify that you have MetaMask installed and unlocked.","danger")}}}},n=e(19),r=Object(n.a)(s,(function(){var t=this,a=t._self._c;return a("b-container",[a("b-row",{staticClass:"mt-4"},[a("b-col",{attrs:{lg:"10","offset-lg":"1"}},[t.loading?[a("b-card",{staticClass:"mb-3"},[a("ui--loader",{attrs:{loading:!0}})],1)]:[t.dapp.metamask.address?[t.loadingData?[a("ui--loader",{attrs:{loading:!0}})]:[t.account.member?[a("ui--member-details",{attrs:{account:t.account,token:t.token}})]:[a("b-card",{staticClass:"mb-3",attrs:{header:"Your account"}},[a("b",[t._v("Account:")]),t._v(" "),a("b-link",{attrs:{href:`${t.dapp.network.current.etherscanLink}/address/${t.dapp.metamask.address}`,target:"_blank"}},[t._v("\n                                    "+t._s(t.dapp.metamask.address)+"\n                                ")])],1),t._v(" "),a("b-card",{staticClass:"mb-3",attrs:{header:"FriendsFingers DAO"}},[a("b-btn",{attrs:{variant:"primary",size:"lg",disabled:t.makingTransaction},on:{click:t.join}},[t._v("\n                                    Join DAO\n                                ")]),t._v(" "),a("br"),t._v(" "),t.trx.hash?a("b-alert",{staticClass:"mt-3",attrs:{show:"",variant:"success"}},[t._v("\n                                    Last transaction:\n                                    "),a("b-link",{attrs:{href:t.trx.link,target:"_blank"}},[t._v(t._s(t.trx.hash))])],1):t._e()],1)]]]:[a("b-card",{staticClass:"mb-3",attrs:{header:"Your account"}},[t.dapp.metamask.installed&&t.dapp.metamask.netId===t.dapp.network.current.id?a("p",{staticClass:"card-text"},[a("b-btn",{attrs:{variant:"primary",size:"lg",disabled:!t.dapp.metamask.installed||t.dapp.metamask.netId!==t.dapp.network.current.id},on:{click:t.enable}},[t._v("\n                                Connect\n                            ")])],1):a("b-alert",{attrs:{variant:"warning",show:""}},[t.dapp.metamask.installed?t.dapp.metamask.netId!==t.dapp.network.current.id?[t._v("\n                                You are on the wrong Network."),a("br"),t._v("\n                                Please switch your Ethereum Provider on "),a("b",[t._v(t._s(t.dapp.network.current.name))]),t._v(".\n                            ")]:t._e():[t._v("\n                                Install\n                                "),a("b-link",{attrs:{href:"https://metamask.io/",target:"_blank"}},[t._v("MetaMask")]),t._v(" "),t.isMobile()?[t._v("or a mobile Web3 browser")]:t._e(),t._v("\n                                to view your dashboard.\n                            ")]],2)],1)]]],2)],1)],1)}),[],!1,null,null,null);a.default=r.exports}}]);