(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{255:function(e,t,a){"use strict";a(49);var s=a(256),n=a.n(s);t.a={data:()=>({zeroAddress:"0x0000000000000000000000000000000000000000"}),computed:{dapp:{get(){return this.$store.getters.dapp}}},methods:{getParam(e){const t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(e,a,s){t[a]=void 0!==s?s:""})),e?t[e]?t[e]:null:t},ethGetCall(e,...t){return t.push({from:this.dapp.fallbackAddress}),this.promisify(e,...t)},promisify:(e,...t)=>new Promise((a,s)=>{e(...t,(e,t)=>{e?s(e):a(t)})}),isMobile(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}},generateQRCode:e=>n.a.toDataURL(e,{color:{dark:"#b733a7",light:"#0000"}}),makeToast(e,t,a=null){this.$bvToast.toast(t,{title:e,variant:a,solid:!0})},formatStructure(e){return 0===parseInt(e[0].valueOf())?null:{id:parseInt(e[0].valueOf()),address:e[1],fingerprint:this.formatFingerprint(e[2]),creationDate:1e3*e[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(e[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(e[5])),data:e[6],approved:e[7]}},formatFingerprint(e){const t=e.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#"+t[0],backgroundColor:"#"+t[1],mainColor:"#"+t[2]}}}}},308:function(e,t,a){"use strict";a.r(t);a(49);var s={name:"TokenDealer",mixins:[a(255).a],data:()=>({loading:!0,makingTransaction:!1,terms:[],ethAmount:"",trx:{hash:"",link:""},token:{name:"",symbol:"",decimals:18,link:"",logo:""},dealer:{address:"",qrcode:"",rate:0,expectedTokenAmount:0,remainingTokens:0},contributions:{totalSoldTokens:0}}),computed:{dapp:{get(){return this.$store.getters.dapp}}},mounted(){this.initDealer()},methods:{initDealer(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDealer"),this.$store.dispatch("initContributions"),this.ready()}catch(e){console.log(e),this.makeToast("Some errors occurred",e,"danger"),this.$router.push({path:"/"})}},async ready(){await this.getTokenData(),await this.getDealerData(),this.loading=!1},async getTokenData(){try{this.token.name=await this.ethGetCall(this.dapp.instances.token.name),this.token.symbol=await this.ethGetCall(this.dapp.instances.token.symbol),this.token.link=this.dapp.network.current.etherscanLink+"/token/"+this.dapp.instances.token.address,this.token.logo=this.$withBase("/assets/images/logo/shaka_logo_white.png")}catch(e){console.log(e),this.makeToast("Some errors occurred",e,"danger"),this.loading=!1}},async getDealerData(){try{this.dealer.address=this.dapp.instances.dealer.address,this.dealer.qrcode=await this.generateQRCode(this.dealer.address),this.dealer.rate=parseFloat(await this.ethGetCall(this.dapp.instances.dealer.rate)),this.dealer.remainingTokens=parseFloat(this.dapp.web3.fromWei(await this.ethGetCall(this.dapp.instances.token.balanceOf,this.dealer.address))),this.contributions.totalSoldTokens=parseFloat(this.dapp.web3.fromWei(await this.ethGetCall(this.dapp.instances.contributions.totalSoldTokens))),this.dealer.max=this.contributions.totalSoldTokens+this.dealer.remainingTokens,this.dealer.percentage=100*this.contributions.totalSoldTokens/this.dealer.max}catch(e){console.log(e),this.makeToast("Some errors occurred",e,"danger"),this.loading=!1}},async getExpectedTokenAmount(){this.dealer.expectedTokenAmount=parseFloat(this.dapp.web3.fromWei(await this.ethGetCall(this.dapp.instances.dealer.expectedTokenAmount,this.dapp.metamask.address,this.dapp.web3.toWei(this.ethAmount))))},buyTokens(){this.$validator.validate("ethAmount").then(e=>{if(e){if(!this.dapp.metamask.installed)return void this.makeToast("Cannot connect","Please verify that you have MetaMask installed and unlocked.","danger");if(this.dapp.metamask.netId!==this.dapp.network.current.id)return void this.makeToast("You are on the wrong Network",`Please switch MetaMask on ${this.dapp.network.current.name}.`,"danger");try{this.makingTransaction=!0,this.dapp.instances.dealer.buyTokens({value:this.dapp.web3.toWei(this.ethAmount),from:this.dapp.metamask.address,to:this.dapp.instances.dealer.address},(e,t)=>{e?(console.log(e),this.makeToast("Some errors occurred","Maybe you rejected the transaction or you have MetaMask locked!","danger")):(this.trx.hash=t,this.trx.link=this.dapp.network.current.etherscanLink+"/tx/"+this.trx.hash),this.makingTransaction=!1})}catch(e){console.log(e),this.makeToast("Cannot connect","Please verify that you have MetaMask installed and unlocked.","danger")}}}).catch(e=>{console.log(e),this.makeToast("Some errors occurred",e,"danger"),this.makingTransaction=!1})}}},n=a(19),r=Object(n.a)(s,(function(){var e=this,t=e._self._c;return t("b-row",[t("b-col",{attrs:{lg:"12"}},[t("b-card",{staticClass:"mt-4",attrs:{"bg-variant":"peach",title:"Dealer status"}},[e.loading?[t("ui--loader",{attrs:{loading:!0,color:"#ffffff"}})]:[t("p",{staticClass:"card-text"},[e._v("\n                    We've already distributed "),t("b",[e._v(e._s(e.contributions.totalSoldTokens)+" "+e._s(e.token.symbol))]),e._v(".\n                    Remaining tokens "),t("b",[e._v(e._s(e.dealer.remainingTokens)+" "+e._s(e.token.symbol))]),e._v("."),t("br"),e._v(" "),t("b-progress",{staticClass:"mt-2",attrs:{value:e.dealer.percentage,variant:"warning",striped:"",animated:!0}}),e._v(" "),t("br"),e._v(" "),t("span",[e._v("\n                            Default rate is "),t("strong",[e._v(e._s(e.dealer.rate)+" "+e._s(e.token.symbol)+"/ETH")]),t("br"),e._v("\n                            If you have joined our DAO you will have a "),t("strong",[e._v("+100% bonus")]),e._v("."),t("br"),e._v("\n                            If you have staked tokens you will have a "),t("strong",[e._v("+300% bonus")]),e._v(".\n                        ")])],1)]],2)],1),e._v(" "),3===e.terms.length?t("b-col",{attrs:{lg:"12"}},[t("b-card",{staticClass:"mt-4",attrs:{header:"Get Shaka Tokens using your Web3 Wallet"}},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.buyTokens.apply(null,arguments)}}},[t("b-input-group",[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,decimal:18,min_value:.01},expression:"{ required: true, decimal: 18, min_value: 0.01 }"}],class:{"is-invalid":e.errors.has("ethAmount")},attrs:{id:"ethAmount",name:"ethAmount",disabled:e.makingTransaction,"data-vv-as":"ETH amount"},on:{keyup:e.getExpectedTokenAmount},model:{value:e.ethAmount,callback:function(t){e.ethAmount="string"==typeof t?t.trim():t},expression:"ethAmount"}}),e._v(" "),t("b-input-group-append",[t("b-button",{attrs:{disabled:e.makingTransaction,type:"submit",variant:"primary"}},[e._v("\n                            Send ETH\n                        ")])],1)],1),e._v(" "),e.dealer.expectedTokenAmount>0?t("b-form-valid-feedback",{attrs:{state:!0}},[e._v("\n                    You'll receive "+e._s(e.dealer.expectedTokenAmount)+" "+e._s(e.token.symbol)),t("br"),e._v(" "),e.dapp.metamask.address?t("span",{staticClass:"text-info"},[e._v("\n                            Note: this rate is relative to address "),t("b",[e._v(e._s(e.dapp.metamask.address))])]):t("span",{staticClass:"text-info"},[e._v("\n                            Note: "),t("b-link",{attrs:{to:e.$withBase("/dashboard")}},[e._v("connect")]),e._v(" to have\n                            rate calculated basing on your address\n                        ")],1)]):t("b-form-text",[e._v("\n                    Insert the amount of ETH you want to send and we will calculate your rate.\n                ")]),e._v(" "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("ethAmount"),expression:"errors.has('ethAmount')"}],staticClass:"text-danger"},[e._v("\n                    "+e._s(e.errors.first("ethAmount"))+"\n                ")])],1),e._v(" "),e.trx.hash?t("b-alert",{staticClass:"mt-3",attrs:{show:"",variant:"success"}},[e._v("\n                Last transaction:\n                "),t("b-link",{attrs:{href:e.trx.link,target:"_blank"}},[e._v(e._s(e.trx.hash))])],1):e._e()],1),e._v(" "),t("b-card",{staticClass:"mt-4",attrs:{header:"Or use your preferred wallet","no-body":""}},[t("b-media",[t("b-img",{attrs:{slot:"aside","fluid-grow":"",src:e.dealer.qrcode,alt:e.dealer.address},slot:"aside"}),e._v(" "),t("h4",{staticClass:"card-title my-3"},[e._v("Send ETH to the following address")]),e._v(" "),t("h6",{staticClass:"card-subtitle text-muted address"},[e._v(e._s(e.dealer.address))]),e._v(" "),t("b-link",{staticClass:"text-muted",attrs:{href:e.dapp.network.current.etherscanLink+"/address/"+e.dealer.address,target:"_blank"}},[t("small",[e._v("View on Etherscan")])])],1),e._v(" "),t("b-alert",{staticClass:"mb-0",attrs:{show:"",variant:"warning"}},[e._v("\n                NOTE: Do not send ETH from exchange like Coinbase, Bittrex, Bitfinex or similar.\n                They don’t give you full access to your wallet so sending ETH from one of these\n                means for you losing your tokens and we won’t be able to help you to recover them.\n            ")])],1)],1):e._e(),e._v(" "),t("b-col",{attrs:{lg:"12"}},[t("b-card",{staticClass:"mt-4",attrs:{"border-variant":"info","header-bg-variant":"info","header-text-variant":"white",header:"Accept Terms and Conditions"}},[t("b-form-group",[t("b-form-checkbox-group",{model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}},[t("b-form-checkbox",{attrs:{value:"citizens",disabled:e.terms.includes("citizens")}},[e._v('\n                        Confirm that you are NOT a U.S. or Chinese citizen, resident or entity\n                        (each a "U.S. or Chinese Person") nor are you purchasing Tokens or signing\n                        on behalf of a U.S. or Chinese Person\n                    ')]),e._v(" "),t("b-form-checkbox",{attrs:{value:"country",disabled:e.terms.includes("country")}},[e._v("\n                        Confirm that you are legitimate to purchase Tokens and you are compliant\n                        with active regulation in your country of residence\n                    ")]),e._v(" "),t("b-form-checkbox",{attrs:{value:"global",disabled:e.terms.includes("global")}},[e._v("\n                        Confirm that you have read, understood and agreed the FriendsFingers'\n                        Terms and Conditions expressed in our\n                        "),t("b-link",{attrs:{href:"https://www.friendsfingers.com/whitepaper",target:"_blank"}},[e._v("\n                            Whitepaper\n                        ")]),e._v("\n                        and Official links below. Confirm also that you have read, understood and agreed\n                        the FriendsFingers'\n                        "),t("b-link",{attrs:{href:"https://www.friendsfingers.com/terms",target:"_blank"}},[e._v("\n                            Terms of Use\n                        ")]),e._v("\n                        and\n                        "),t("b-link",{attrs:{href:"https://www.friendsfingers.com/privacy",target:"_blank"}},[e._v("\n                            Privacy Policy\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=r.exports}}]);