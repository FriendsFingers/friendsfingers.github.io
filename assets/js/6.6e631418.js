(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{255:function(t,e,a){"use strict";a(49);var s=a(256),i=a.n(s);e.a={data:()=>({zeroAddress:"0x0000000000000000000000000000000000000000"}),computed:{dapp:{get(){return this.$store.getters.dapp}}},methods:{getParam(t){const e={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(t,a,s){e[a]=void 0!==s?s:""})),t?e[t]?e[t]:null:e},ethGetCall(t,...e){return e.push({from:this.dapp.fallbackAddress}),this.promisify(t,...e)},promisify:(t,...e)=>new Promise((a,s)=>{t(...e,(t,e)=>{t?s(t):a(e)})}),isMobile(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}},generateQRCode:t=>i.a.toDataURL(t,{color:{dark:"#b733a7",light:"#0000"}}),makeToast(t,e,a=null){this.$bvToast.toast(e,{title:t,variant:a,solid:!0})},formatStructure(t){return 0===parseInt(t[0].valueOf())?null:{id:parseInt(t[0].valueOf()),address:t[1],fingerprint:this.formatFingerprint(t[2]),creationDate:1e3*t[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(t[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(t[5])),data:t[6],approved:t[7]}},formatFingerprint(t){const e=t.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#"+e[0],backgroundColor:"#"+e[1],mainColor:"#"+e[2]}}}}},294:function(t,e,a){"use strict";a.r(e);a(49);var s={name:"Dao",mixins:[a(255).a],data:()=>({loading:!0,pagination:{page:1,limit:12},memberList:[],token:{name:"",symbol:"",decimals:18,link:"",logo:""},dao:{membersNumber:0,totalStakedTokens:0,totalUsedTokens:0},account:{isMember:!1}}),computed:{dapp:{get(){return this.$store.getters.dapp}}},mounted(){this.memberId=this.getParam("id"),this.initDapp()},methods:{initDapp(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDao"),this.ready()}catch(t){this.makeToast("Some errors occurred",t,"danger"),this.$router.push({path:"/"})}},async ready(){await this.getDaoData(),await this.getTokenData(),this.loading=!1,await this.getMember(this.dao.membersNumber)},loadMore(){this.pagination.page++,this.getMember(this.dao.membersNumber-this.memberList.length)},async getDaoData(){try{this.dao.membersNumber=parseInt((await this.ethGetCall(this.dapp.instances.dao.membersNumber)).valueOf()),this.dao.totalStakedTokens=parseFloat(this.dapp.web3.fromWei(await this.ethGetCall(this.dapp.instances.dao.totalStakedTokens))),this.dao.totalUsedTokens=parseFloat(this.dapp.web3.fromWei(await this.ethGetCall(this.dapp.instances.dao.totalUsedTokens))),this.dapp.metamask.address&&(this.account.isMember=await this.ethGetCall(this.dapp.instances.dao.isMember,this.dapp.metamask.address))}catch(t){console.log(t),this.makeToast("Some errors occurred",t,"danger"),this.loading=!1}},async getTokenData(){try{this.token.name=await this.ethGetCall(this.dapp.instances.token.name),this.token.symbol=await this.ethGetCall(this.dapp.instances.token.symbol),this.token.link=this.dapp.network.current.etherscanLink+"/token/"+this.dapp.instances.token.address,this.token.logo=this.$withBase("/assets/images/logo/shaka_logo_white.png")}catch(t){this.loading=!1,console.log(t),this.makeToast("Some errors occurred",t,"danger")}},async getMember(t){const e=await this.ethGetCall(this.dapp.instances.dao.getMemberById,t),a=this.formatStructure(e);this.memberList.push(a),this.memberList.length%(this.pagination.limit*this.pagination.page)!=0&&this.memberList.length<this.dao.membersNumber&&this.getMember(this.dao.membersNumber-this.memberList.length)}}},i=a(19),r=Object(i.a)(s,(function(){var t=this,e=t._self._c;return e("b-container",[e("b-row",{staticClass:"masthead m-4"},[e("b-col",{attrs:{lg:"8","offset-lg":"2"}},[e("h1",{staticClass:"display-5"},[e("b-img",{attrs:{src:t.$withBase("/assets/images/logo/friendsfingers.svg"),rounded:"circle",height:"64",alt:t.$site.title}}),t._v(" "),e("br"),t._v("\n                FriendsFingers DAO\n            ")],1),t._v(" "),t.loading?t._e():[t.account.isMember?t._e():e("b-btn",{staticClass:"my-2",attrs:{to:t.$withBase("/dashboard"),variant:"primary",size:"lg"}},[t._v("\n                    Join DAO\n                ")]),t._v(" "),e("h4",{staticClass:"text-muted"},[e("b",[t._v(t._s(t.dao.membersNumber))]),t._v(" DAO Members"),e("br"),t._v(" "),e("b",[t._v(t._s(t.dao.totalStakedTokens)+" "+t._s(t.token.symbol))]),t._v(" Staked"),e("br"),t._v(" "),t.dao.totalUsedTokens>0?[e("b",[t._v(t._s(t.dao.totalUsedTokens)+" "+t._s(t.token.symbol))]),t._v(" Used\n                    ")]:t._e()],2)]],2)],1),t._v(" "),t.loading?[e("ui--loader",{attrs:{loading:!0}})]:e("b-row",[e("b-col",{attrs:{lg:"10","offset-lg":"1"}},[e("b-row",{staticClass:"mt-2"},t._l(t.memberList,(function(a){return e("b-col",{key:a.id,staticClass:"p-2",attrs:{md:"2",sm:"4",cols:"6"}},[e("b-card",{attrs:{"no-body":""}},[e("b-card-body",[e("b-link",{attrs:{to:{path:"/member/",query:{ref:a.address}}}},[e("ui--member-image",{attrs:{member:a}})],1)],1),t._v(" "),e("b-card-footer",[t._v("\n                            #"+t._s(a.id)+"\n\n                            "),e("div",{staticClass:"float-right"},[a.approved?e("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-1",attrs:{title:"Verified",variant:"success",pill:""}},[e("font-awesome-icon",{attrs:{icon:"check-circle"}})],1):t._e()],1)])],1)],1)})),1),t._v(" "),t.memberList.length<t.dao.membersNumber?e("b-row",{staticClass:"my-5"},[e("b-col",{staticClass:"text-center",attrs:{md:"12"}},[e("b-btn",{attrs:{variant:"outline-primary",size:"lg"},on:{click:t.loadMore}},[t._v("\n                        Load more\n                    ")])],1)],1):t._e()],1)],1)],2)}),[],!1,null,null,null);e.default=r.exports}}]);