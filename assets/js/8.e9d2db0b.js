(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{278:function(e,t,a){"use strict";a(141),a(15),a(279),a(283),a(284),a(52),a(285),a(286),a(76);var n=a(287),r=a.n(n);t.a={data:function(){return{zeroAddress:"0x0000000000000000000000000000000000000000"}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},methods:{getParam:function(e){var t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(e,a,n){t[a]=void 0!==n?n:""})),e?t[e]?t[e]:null:t},ethGetCall:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return a.push({from:this.dapp.fallbackAddress}),this.promisify.apply(this,[e].concat(a))},promisify:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return new Promise((function(t,n){e.apply(void 0,a.concat([function(e,a){e?n(e):t(a)}]))}))},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}},generateQRCode:function(e){return r.a.toDataURL(e,{color:{dark:"#b733a7",light:"#0000"}})},makeToast:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:a,solid:!0})},formatStructure:function(e){return 0===parseInt(e[0].valueOf())?null:{id:parseInt(e[0].valueOf()),address:e[1],fingerprint:this.formatFingerprint(e[2]),creationDate:1e3*e[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(e[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(e[5])),data:e[6],approved:e[7]}},formatFingerprint:function(e){var t=e.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#".concat(t[0]),backgroundColor:"#".concat(t[1]),mainColor:"#".concat(t[2])}}}}},280:function(e,t,a){"use strict";var n=a(1),r=a(281);n({target:"String",proto:!0,forced:a(282)("link")},{link:function(e){return r(this,"a","href",e)}})},281:function(e,t,a){var n=a(20),r=/"/g;e.exports=function(e,t,a,o){var s=String(n(e)),i="<"+t;return""!==a&&(i+=" "+a+'="'+String(o).replace(r,"&quot;")+'"'),i+">"+s+"</"+t+">"}},282:function(e,t,a){var n=a(2);e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},347:function(e,t,a){"use strict";a.r(t);a(142),a(279),a(280),a(53);var n=a(16),r={name:"TokenDealer",mixins:[a(278).a],data:function(){return{loading:!0,makingTransaction:!1,terms:[],ethAmount:"",trx:{hash:"",link:""},token:{name:"",symbol:"",decimals:18,link:"",logo:""},dealer:{address:"",qrcode:"",rate:0,expectedTokenAmount:0,remainingTokens:0},contributions:{totalSoldTokens:0}}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},mounted:function(){this.initDealer()},methods:{initDealer:function(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDealer"),this.$store.dispatch("initContributions"),this.ready()}catch(e){console.log(e),this.makeToast("Some errors occurred",e,"danger"),this.$router.push({path:"/"})}},ready:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTokenData();case 2:return t.next=4,e.getDealerData();case 4:e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},getTokenData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ethGetCall(e.dapp.instances.token.name);case 3:return e.token.name=t.sent,t.next=6,e.ethGetCall(e.dapp.instances.token.symbol);case 6:e.token.symbol=t.sent,e.token.link=e.dapp.network.current.etherscanLink+"/token/"+e.dapp.instances.token.address,e.token.logo=e.$withBase("/assets/images/logo/shaka_logo_white.png"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),e.makeToast("Some errors occurred",t.t0,"danger"),e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getDealerData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.dealer.address=e.dapp.instances.dealer.address,t.next=4,e.generateQRCode(e.dealer.address);case 4:return e.dealer.qrcode=t.sent,t.t0=parseFloat,t.next=8,e.ethGetCall(e.dapp.instances.dealer.rate);case 8:return t.t1=t.sent,e.dealer.rate=(0,t.t0)(t.t1),t.t2=parseFloat,t.t3=e.dapp.web3,t.next=14,e.ethGetCall(e.dapp.instances.token.balanceOf,e.dealer.address);case 14:return t.t4=t.sent,t.t5=t.t3.fromWei.call(t.t3,t.t4),e.dealer.remainingTokens=(0,t.t2)(t.t5),t.t6=parseFloat,t.t7=e.dapp.web3,t.next=21,e.ethGetCall(e.dapp.instances.contributions.totalSoldTokens);case 21:t.t8=t.sent,t.t9=t.t7.fromWei.call(t.t7,t.t8),e.contributions.totalSoldTokens=(0,t.t6)(t.t9),e.dealer.max=e.contributions.totalSoldTokens+e.dealer.remainingTokens,e.dealer.percentage=100*e.contributions.totalSoldTokens/e.dealer.max,t.next=33;break;case 28:t.prev=28,t.t10=t.catch(0),console.log(t.t10),e.makeToast("Some errors occurred",t.t10,"danger"),e.loading=!1;case 33:case"end":return t.stop()}}),t,null,[[0,28]])})))()},getExpectedTokenAmount:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=parseFloat,t.t1=e.dapp.web3,t.next=4,e.ethGetCall(e.dapp.instances.dealer.expectedTokenAmount,e.dapp.metamask.address,e.dapp.web3.toWei(e.ethAmount));case 4:t.t2=t.sent,t.t3=t.t1.fromWei.call(t.t1,t.t2),e.dealer.expectedTokenAmount=(0,t.t0)(t.t3);case 7:case"end":return t.stop()}}),t)})))()},buyTokens:function(){var e=this;this.$validator.validate("ethAmount").then((function(t){if(t){if(!e.dapp.metamask.installed)return void e.makeToast("Cannot connect","Please verify that you have MetaMask installed and unlocked.","danger");if(e.dapp.metamask.netId!==e.dapp.network.current.id)return void e.makeToast("You are on the wrong Network","Please switch MetaMask on ".concat(e.dapp.network.current.name,"."),"danger");try{e.makingTransaction=!0,e.dapp.instances.dealer.buyTokens({value:e.dapp.web3.toWei(e.ethAmount),from:e.dapp.metamask.address,to:e.dapp.instances.dealer.address},(function(t,a){t?(console.log(t),e.makeToast("Some errors occurred","Maybe you rejected the transaction or you have MetaMask locked!","danger")):(e.trx.hash=a,e.trx.link=e.dapp.network.current.etherscanLink+"/tx/"+e.trx.hash),e.makingTransaction=!1}))}catch(t){console.log(t),e.makeToast("Cannot connect","Please verify that you have MetaMask installed and unlocked.","danger")}}})).catch((function(t){console.log(t),e.makeToast("Some errors occurred",t,"danger"),e.makingTransaction=!1}))}}},o=a(32),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{staticClass:"mt-4",attrs:{"bg-variant":"peach",title:"Dealer status"}},[e.loading?[a("ui--loader",{attrs:{loading:!0,color:"#ffffff"}})]:[a("p",{staticClass:"card-text"},[e._v("\n                    We've already distributed "),a("b",[e._v(e._s(e.contributions.totalSoldTokens)+" "+e._s(e.token.symbol))]),e._v(".\n                    Remaining tokens "),a("b",[e._v(e._s(e.dealer.remainingTokens)+" "+e._s(e.token.symbol))]),e._v("."),a("br"),e._v(" "),a("b-progress",{staticClass:"mt-2",attrs:{value:e.dealer.percentage,variant:"warning",striped:"",animated:!0}}),e._v(" "),a("br"),e._v(" "),a("span",[e._v("\n                            Default rate is "),a("strong",[e._v(e._s(e.dealer.rate)+" "+e._s(e.token.symbol)+"/ETH")]),a("br"),e._v("\n                            If you have joined our DAO you will have a "),a("strong",[e._v("+100% bonus")]),e._v("."),a("br"),e._v("\n                            If you have staked tokens you will have a "),a("strong",[e._v("+300% bonus")]),e._v(".\n                        ")])],1)]],2)],1),e._v(" "),3===e.terms.length?a("b-col",{attrs:{lg:"12"}},[a("b-card",{staticClass:"mt-4",attrs:{header:"Get Shaka Tokens using your Web3 Wallet"}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.buyTokens(t)}}},[a("b-input-group",[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,decimal:18,min_value:.01},expression:"{ required: true, decimal: 18, min_value: 0.01 }"}],class:{"is-invalid":e.errors.has("ethAmount")},attrs:{id:"ethAmount",name:"ethAmount",disabled:e.makingTransaction,"data-vv-as":"ETH amount"},on:{keyup:e.getExpectedTokenAmount},model:{value:e.ethAmount,callback:function(t){e.ethAmount="string"==typeof t?t.trim():t},expression:"ethAmount"}}),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:e.makingTransaction,type:"submit",variant:"primary"}},[e._v("\n                            Send ETH\n                        ")])],1)],1),e._v(" "),e.dealer.expectedTokenAmount>0?a("b-form-valid-feedback",{attrs:{state:!0}},[e._v("\n                    You'll receive "+e._s(e.dealer.expectedTokenAmount)+" "+e._s(e.token.symbol)),a("br"),e._v(" "),e.dapp.metamask.address?a("span",{staticClass:"text-info"},[e._v("\n                            Note: this rate is relative to address "),a("b",[e._v(e._s(e.dapp.metamask.address))])]):a("span",{staticClass:"text-info"},[e._v("\n                            Note: "),a("b-link",{attrs:{to:e.$withBase("/dashboard")}},[e._v("connect")]),e._v(" to have\n                            rate calculated basing on your address\n                        ")],1)]):a("b-form-text",[e._v("\n                    Insert the amount of ETH you want to send and we will calculate your rate.\n                ")]),e._v(" "),a("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("ethAmount"),expression:"errors.has('ethAmount')"}],staticClass:"text-danger"},[e._v("\n                    "+e._s(e.errors.first("ethAmount"))+"\n                ")])],1),e._v(" "),e.trx.hash?a("b-alert",{staticClass:"mt-3",attrs:{show:"",variant:"success"}},[e._v("\n                Last transaction:\n                "),a("b-link",{attrs:{href:e.trx.link,target:"_blank"}},[e._v(e._s(e.trx.hash))])],1):e._e()],1),e._v(" "),a("b-card",{staticClass:"mt-4",attrs:{header:"Or use your preferred wallet","no-body":""}},[a("b-media",[a("b-img",{attrs:{slot:"aside","fluid-grow":"",src:e.dealer.qrcode,alt:e.dealer.address},slot:"aside"}),e._v(" "),a("h4",{staticClass:"card-title my-3"},[e._v("Send ETH to the following address")]),e._v(" "),a("h6",{staticClass:"card-subtitle text-muted address"},[e._v(e._s(e.dealer.address))]),e._v(" "),a("b-link",{staticClass:"text-muted",attrs:{href:e.dapp.network.current.etherscanLink+"/address/"+e.dealer.address,target:"_blank"}},[a("small",[e._v("View on Etherscan")])])],1),e._v(" "),a("b-alert",{staticClass:"mb-0",attrs:{show:"",variant:"warning"}},[e._v("\n                NOTE: Do not send ETH from exchange like Coinbase, Bittrex, Bitfinex or similar.\n                They don’t give you full access to your wallet so sending ETH from one of these\n                means for you losing your tokens and we won’t be able to help you to recover them.\n            ")])],1)],1):e._e(),e._v(" "),a("b-col",{attrs:{lg:"12"}},[a("b-card",{staticClass:"mt-4",attrs:{"border-variant":"info","header-bg-variant":"info","header-text-variant":"white",header:"Accept Terms and Conditions"}},[a("b-form-group",[a("b-form-checkbox-group",{model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}},[a("b-form-checkbox",{attrs:{value:"citizens",disabled:e.terms.includes("citizens")}},[e._v('\n                        Confirm that you are NOT a U.S. or Chinese citizen, resident or entity\n                        (each a "U.S. or Chinese Person") nor are you purchasing Tokens or signing\n                        on behalf of a U.S. or Chinese Person\n                    ')]),e._v(" "),a("b-form-checkbox",{attrs:{value:"country",disabled:e.terms.includes("country")}},[e._v("\n                        Confirm that you are legitimate to purchase Tokens and you are compliant\n                        with active regulation in your country of residence\n                    ")]),e._v(" "),a("b-form-checkbox",{attrs:{value:"global",disabled:e.terms.includes("global")}},[e._v("\n                        Confirm that you have read, understood and agreed the FriendsFingers'\n                        Terms and Conditions expressed in our\n                        "),a("b-link",{attrs:{href:"https://www.friendsfingers.com/whitepaper",target:"_blank"}},[e._v("\n                            Whitepaper\n                        ")]),e._v("\n                        and Official links below. Confirm also that you have read, understood and agreed\n                        the FriendsFingers'\n                        "),a("b-link",{attrs:{href:"https://www.friendsfingers.com/terms",target:"_blank"}},[e._v("\n                            Terms of Use\n                        ")]),e._v("\n                        and\n                        "),a("b-link",{attrs:{href:"https://www.friendsfingers.com/privacy",target:"_blank"}},[e._v("\n                            Privacy Policy\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=s.exports}}]);