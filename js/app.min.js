"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};Function.prototype.$asyncbind=function a(b,c){"use strict";function d(){return e.apply(b,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:a,enumerable:!1,configurable:!0,writable:!0}),a.trampoline||(a.trampoline=function(a,b,c,d,e){return function f(g){for(;g;){if(g.then)return g=g.then(f,d),e?void 0:g;try{if(g.pop){if(g.length)return g.pop()?b.call(a):g;g=c}else g=g.call(a)}catch(a){return d(a)}}}}),a.LazyThenable||(a.LazyThenable=function(){function a(a){return a&&a instanceof Object&&"function"==typeof a.then}function b(c,d,e){try{var f=e?e(d):d;if(c===f)return c.reject(new TypeError("Promise resolution loop"));a(f)?f.then(function(a){b(c,a)},function(a){c.reject(a)}):c.resolve(f)}catch(a){c.reject(a)}}function c(){}function d(){}function e(c,e){var f=new d;try{this._resolver(function(d){return a(d)?d.then(c,e):b(f,d,c)},function(a){b(f,a,e)})}catch(a){b(f,a,e)}return f}function f(a){this._resolver=a,this.then=e}return d.prototype={resolve:c,reject:c,then:function(a,b){this.resolve=a,this.reject=b}},f.resolve=function(a){return f.isThenable(a)?a:{then:function(b){return b(a)}}},f.isThenable=a,f}(),a.EagerThenable=a.Thenable=(a.EagerThenableFactory=function(a){function b(a){if(a){var b=this;a(function(a){b.resolve(a)},function(a){b.reject(a)})}}function c(a,b){if("function"==typeof a.y)try{var c=a.y.call(void 0,b);a.p.resolve(c)}catch(b){a.p.reject(b)}else a.p.resolve(b)}function d(a,b){if("function"==typeof a.n)try{var c=a.n.call(void 0,b);a.p.resolve(c)}catch(b){a.p.reject(b)}else a.p.reject(b)}a=a||"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,0)};var e=function(){function b(){for(;c.length-d;){try{c[d]()}catch(a){}c[d++]=void 0,d===e&&(c.splice(0,e),d=0)}}var c=[],d=0,e=1024;return function(e){c.push(e),1==c.length-d&&a(b)}}();return b.prototype={resolve:function(a){if(void 0===this.state){if(a===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var b=this;if(a&&("function"==typeof a||"object"===("undefined"==typeof a?"undefined":_typeof(a))))try{var d=0,f=a.then;if("function"==typeof f)return void f.call(a,function(a){d++||b.resolve(a)},function(a){d++||b.reject(a)})}catch(a){return void(d||this.reject(a))}this.state=c,this.v=a,b.c&&e(function(){for(var d=0,e=b.c.length;d<e;d++)c(b.c[d],a)})}},reject:function(a){if(void 0===this.state){this.state=d,this.v=a;var b=this.c;b&&e(function(){for(var c=0,e=b.length;c<e;c++)d(b[c],a)})}},then:function(c,d){var f=new b,g={y:c,n:d,p:f};if(void 0===this.state)this.c?this.c.push(g):this.c=[g];else{var h=this.state,i=this.v;e(function(){h(g,i)})}return f}},b.resolve=function(a){if(a&&a instanceof b)return a;var c=new b;return c.resolve(a),c},b.reject=function(a){if(a&&a instanceof b)return a;var c=new b;return c.reject(a),c},b.version="2.3.3-nodent",b})());var e=this;return!0===c?new a.Thenable(d):0===c?new a.LazyThenable(d):void 0===c?(d.then=d,d):function(){try{return e.apply(b,arguments)}catch(a){return c(a)}}};function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}var App={legacy:!1,web3:null,web3Provider:null,etherscanLink:"",metamask:{installed:!1,netId:null},contracts:{},init:function(){var a=_asyncToGenerator(function*(){return App.initWeb3(!0)});return function(){return a.apply(this,arguments)}}(),setTestnet:function(){web3Provider=DEMO_web3Provider,etherscanLink=DEMO_etherscanLink,networkId=DEMO_networkId,networkName=DEMO_networkName,FriendsFingersBuilderAddress=DEMO_FriendsFingersBuilderAddress,crowdsaleUrl=DEMO_crowdsaleUrl,restartUrl=DEMO_restartUrl},initWeb3:function(){var a=_asyncToGenerator(function*(a){return new Promise(function(b){App.etherscanLink=etherscanLink,a&&("undefined"!=typeof ethereum||"undefined"!=typeof web3)?(ethereum?(console.log("injected web3"),App.web3Provider=ethereum):(console.log("injected web3 (legacy)"),App.web3Provider=web3.currentProvider,App.legacy=!0),App.web3=new Web3(App.web3Provider),App.metamask.installed=!0,App.web3.version.getNetwork(function(){var a=_asyncToGenerator(function*(a,c){a&&console.log(a),App.metamask.netId=c,c!==networkId&&(App.web3Provider=new Web3.providers.HttpProvider(web3Provider),App.web3=new Web3(App.web3Provider)),b()});return function(){return a.apply(this,arguments)}}())):(console.log("provided web3"),App.web3Provider=new Web3.providers.HttpProvider(web3Provider),App.web3=new Web3(App.web3Provider),b())})});return function(){return a.apply(this,arguments)}}(),initBuilder:function(){var a=_asyncToGenerator(function*(){return new Promise(function(a){$.getJSON(abiPath+"FriendsFingersBuilder.json",function(b){App.contracts.FriendsFingersBuilder=TruffleContract(b),App.contracts.FriendsFingersBuilder.setProvider(App.web3Provider),a()})})});return function(){return a.apply(this,arguments)}}(),initCrowdsale:function(){var a=_asyncToGenerator(function*(a){return a=a?a:"FriendsFingersCrowdsale.json",new Promise(function(b){$.getJSON(abiPath+a,function(a){App.contracts.FriendsFingersCrowdsale=TruffleContract(a),App.contracts.FriendsFingersCrowdsale.setProvider(App.web3Provider),b()})})});return function(){return a.apply(this,arguments)}}(),initToken:function(){var a=_asyncToGenerator(function*(a){return a=a?a:"FriendsFingersToken.json",new Promise(function(b){$.getJSON(abiPath+a,function(a){App.contracts.FriendsFingersToken=TruffleContract(a),App.contracts.FriendsFingersToken.setProvider(App.web3Provider),b()})})});return function(){return a.apply(this,arguments)}}(),home:function(){var a=_asyncToGenerator(function*(){});return function(){return a.apply(this,arguments)}}(),bountyProgram:function(){var a=_asyncToGenerator(function*(){yield App.init(),Vue.use(VeeValidate),new Vue({el:"#bounty-program",data:{address_error:!1,copied:!1,wallet:"",email:"",telegram:"",postlink:""},methods:{subscribeBounty:function(){this.address_error=""!==this.wallet&&!App.web3.isAddress(this.wallet);this.address_error||this.$validator.validateAll().then(function(a){a?$("#mc-embedded-subscribe-form").submit():console.log("some errors")})},copyLink:function(){if(""!==this.wallet&&!this.address_error){document.querySelector("#mce-LINK").select();try{this.copied=document.execCommand("copy")}catch(a){this.copied=!1}}}},computed:{generateLink:function(){return this.address_error=""!==this.wallet&&!App.web3.isAddress(this.wallet),""===this.wallet||this.address_error?"":"https://www.friendsfingers.com/?utm_campaign=bounty&utm_source="+this.wallet}}})});return function(){return a.apply(this,arguments)}}(),builder:function(){var a=_asyncToGenerator(function*(){yield App.init(),Vue.use(VeeValidate),yield App.initBuilder(),new Vue({el:"#crowdsale-start",data:{demo:"1"!==networkId,minStartDate:"",maxStartDate:"",minEndDate:"",maxEndDate:"",txError:!1,txHash:"",crowdsaleLink:"",addressLink:"",makingTransaction:!1,formDisabled:!1,countryAgreement:!1,globalAgreement:!1,crowdsale:{id:"",address:"",projectInfo:{}},token:{decimals:18}},created:function(){var a=this;this.$validator.extend("eth_address",{getMessage:function(){return"Insert a valid Ethereum wallet address."},validate:function(a){return App.web3.isAddress(a)}}),this.$validator.extend("date_start_min",{getMessage:function(){return"Start date must be at least "+moment().add(5,"minutes").format("DD-MM-YYYY HH:mm")},validate:function(a){return moment(a).isAfter(moment().add(5,"minute"))}}),this.$validator.extend("date_end_min",{getMessage:function(){return"End date must be after start date and not more than 30 days after start"},validate:function(b){return moment(b).isBetween(moment(a.crowdsale.startTime).add(1,"minute"),moment(a.crowdsale.startTime).add(30,"day"))}})},methods:{startCrowdsale:function(){var a=this;return App.metamask.installed?App.metamask.netId===networkId?void this.$validator.validateAll().then(function(){var b=_asyncToGenerator(function*(b){if(b){App.legacy||(yield App.web3Provider.enable()),console.log("starting");var c=yield App.contracts.FriendsFingersBuilder.at(FriendsFingersBuilderAddress),d=a.token.name,e=a.token.symbol.toUpperCase(),f=new App.web3.BigNumber(a.token.decimals),g=App.web3.toWei(a.crowdsale.cap,"ether"),h=App.web3.toWei(a.crowdsale.goal,"ether"),i=new App.web3.BigNumber(a.crowdsale.creatorSupply*Math.pow(10,a.token.decimals)),j=new Date(a.crowdsale.startTime).getTime()/1e3,k=new Date(a.crowdsale.endTime).getTime()/1e3,l=new App.web3.BigNumber(a.crowdsale.rate),m=a.crowdsale.wallet,n=JSON.stringify(a.crowdsale.projectInfo);try{a.txError=!1,a.txHash="",a.formDisabled=!0,a.makingTransaction=!0;var o=yield c.startCrowdsale(d,e,f,g,h,i,j,k,l,m,n);console.log(o),a.txHash=o.tx,a.trxLink=App.etherscanLink+"/tx/"+a.txHash,yield App.initCrowdsale();var p=o.logs.find(function(a){return"CrowdsaleStarted"===a.event});if("undefined"==typeof p)return a.txError=!0,a.formDisabled=!1,void alert("Some error occurred. Maybe transaction failed for some reasons. Check your transaction id.");var q=yield App.contracts.FriendsFingersCrowdsale.at(p.args.ffCrowdsale);a.crowdsale.address=q.address,a.crowdsale.id=parseInt((yield q.id())),a.crowdsaleLink=crowdsaleUrl+"?id="+a.crowdsale.id,a.addressLink=App.etherscanLink+"/address/"+a.crowdsale.address}catch(b){a.makingTransaction=!1,a.formDisabled=!1,alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"),console.log(b)}}else console.log("some errors")});return function(){return b.apply(this,arguments)}}()):void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!"):void alert("To create a Crowdsale please install the MetaMask extension!")}}})});return function(){return a.apply(this,arguments)}}(),restart:function(){var a=_asyncToGenerator(function*(a){yield App.init(),Vue.use(VeeValidate),new Vue({el:"#crowdsale-start",data:{demo:"1"!==networkId,minStartDate:"",maxStartDate:"",minEndDate:"",maxEndDate:"",txError:!1,txHash:"",crowdsaleLink:"",addressLink:"",makingTransaction:!1,formDisabled:!1,countryAgreement:!1,globalAgreement:!1,crowdsale:{ffContract:!0,id:"",address:"",cap:0,goal:0,weiRaised:0,soldTokens:0,rate:0,oldRate:0,startTime:0,endTime:0,wallet:"",hasStarted:!1,hasEnded:!0,paused:!0,isFinalized:!1,projectInfo:{}},token:{decimals:18}},created:function(){var b=_asyncToGenerator(function*(){var b=this;yield App.initBuilder(),yield App.initCrowdsale(),yield App.initToken(),this.$validator.extend("eth_address",{getMessage:function(){return"Insert a valid Ethereum wallet address."},validate:function(a){return App.web3.isAddress(a)}}),this.$validator.extend("date_start_min",{getMessage:function(){return"Start date must be at least "+moment().add(5,"minutes").format("DD-MM-YYYY HH:mm")},validate:function(a){return moment(a).isAfter(moment().add(5,"minute"))}}),this.$validator.extend("date_end_min",{getMessage:function(){return"End date must be after start date and not more than 30 days after start"},validate:function(a){return moment(a).isBetween(moment(b.crowdsale.startTime).add(1,"minute"),moment(b.crowdsale.startTime).add(30,"day"))}});var c=yield App.contracts.FriendsFingersBuilder.at(FriendsFingersBuilderAddress);if(this.crowdsaleAddress=yield c.crowdsaleList(a),0===parseInt(this.crowdsaleAddress))return void(window.location.href=window.location.origin+"/not-found");var d=yield App.contracts.FriendsFingersCrowdsale.at(this.crowdsaleAddress),e=yield App.contracts.FriendsFingersToken.at((yield d.token()));return this.token.address=e.address,this.token.name=yield e.name(),this.token.symbol=yield e.symbol(),this.token.decimals=(yield e.decimals()).valueOf(),this.crowdsale.address=d.address,this.crowdsale.cap=App.web3.fromWei((yield d.cap())).valueOf(),this.crowdsale.oldRate=(yield d.rate()).valueOf(),this.crowdsale.wallet=yield d.wallet(),this.crowdsale.projectInfo=JSON.parse((yield d.crowdsaleInfo())),this.crowdsale.hasEnded=yield d.hasEnded(),this.crowdsale.paused=yield d.paused(),this.crowdsale.isFinalized=yield d.isFinalized(),this.crowdsale.goalReached=yield d.goalReached(),this.crowdsale.round=yield d.round(),this.crowdsale.builder=yield c.crowdsaleCreators(this.crowdsale.address),this.crowdsale.paused||!this.crowdsale.hasEnded||this.crowdsale.isFinalized||!this.crowdsale.goalReached||5===this.crowdsale.round||this.crowdsale.builder!==App.web3.eth.accounts[0]?void(window.location.href=window.location.origin+"/not-found"):void $(".crowdsale-box").toggleClass("d-none")});return function(){return b.apply(this,arguments)}}(),methods:{startCrowdsale:function(){var a=this;return App.metamask.installed?App.metamask.netId===networkId?void this.$validator.validateAll().then(function(){var b=_asyncToGenerator(function*(b){if(b){App.legacy||(yield App.web3Provider.enable()),console.log("starting");var c=yield App.contracts.FriendsFingersBuilder.at(FriendsFingersBuilderAddress),d=App.web3.toWei(a.crowdsale.cap,"ether"),e=new Date(a.crowdsale.startTime).getTime()/1e3,f=new Date(a.crowdsale.endTime).getTime()/1e3,g=new App.web3.BigNumber(a.crowdsale.rate),h=JSON.stringify(a.crowdsale.projectInfo);try{a.txError=!1,a.txHash="",a.formDisabled=!0,a.makingTransaction=!0;var i=yield c.restartCrowdsale(a.crowdsale.address,d,e,f,g,h);console.log(i),a.txHash=i.tx,a.trxLink=App.etherscanLink+"/tx/"+a.txHash,yield App.initCrowdsale();var j=i.logs.find(function(a){return"CrowdsaleStarted"===a.event});if("undefined"==typeof j)return a.txError=!0,a.formDisabled=!1,void alert("Some error occurred. Maybe transaction failed for some reasons. Check your transaction id.");var k=yield App.contracts.FriendsFingersCrowdsale.at(j.args.ffCrowdsale);a.crowdsale.address=k.address,a.crowdsale.id=parseInt((yield k.id())),a.crowdsaleLink=crowdsaleUrl+"?id="+a.crowdsale.id,a.addressLink=App.etherscanLink+"/address/"+a.crowdsale.address}catch(b){alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"),a.makingTransaction=!1,a.formDisabled=!1,console.log(b)}}else console.log("some errors")});return function(){return b.apply(this,arguments)}}()):void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!"):void alert("To restart a Crowdsale please install the MetaMask extension!")}}})});return function(){return a.apply(this,arguments)}}(),viewCrowdsale:function(){var a=_asyncToGenerator(function*(a){yield App.init(),Vue.use(VeeValidate),new Vue({el:"#crowdsale-details",data:{demo:"1"!==networkId,qrcodeVisible:!1,copied:!1,usAgreement:!1,countryAgreement:!1,globalAgreement:!1,funds:1,txHash:"",restartLink:"",isCrowdsaleOwner:!1,makingTransaction:!1,closingCrowdsale:!1,crowdsaleAddress:0,authenticated:!0,crowdsale:{ffContract:!0,cap:0,goal:0,weiRaised:0,soldTokens:0,rate:0,startTime:0,endTime:0,hasStarted:!1,hasEnded:!0,paused:!0,isFinalized:!1,projectInfo:{}},token:{crowdsaleSupply:0}},created:function(){var b=_asyncToGenerator(function*(){yield App.initBuilder(),yield App.initCrowdsale(),yield App.initToken();var b=yield App.contracts.FriendsFingersBuilder.at(FriendsFingersBuilderAddress);if(this.crowdsaleAddress=yield b.crowdsaleList(a),this.crowdsale.id=a,0===parseInt(this.crowdsaleAddress))return void(window.location.href=window.location.origin+"/not-found");var c=yield App.contracts.FriendsFingersCrowdsale.at(this.crowdsaleAddress),d=yield App.contracts.FriendsFingersToken.at((yield c.token()));this.token.address=d.address,this.token.name=yield d.name(),this.token.symbol=yield d.symbol(),this.token.decimals=(yield d.decimals()).valueOf(),this.crowdsale.address=c.address,this.crowdsale.cap=App.web3.fromWei((yield c.cap())).valueOf(),this.crowdsale.goal=App.web3.fromWei((yield c.goal())).valueOf(),this.crowdsale.weiRaised=App.web3.fromWei((yield c.weiRaised())).valueOf(),this.crowdsale.rate=(yield c.rate()).valueOf(),this.crowdsale.soldTokens=App.web3.toWei(this.crowdsale.weiRaised)*this.crowdsale.rate/Math.pow(10,this.token.decimals),this.crowdsale.startTime=1e3*(yield c.startTime()).valueOf(),this.crowdsale.startTimeFormatted=new Date(this.crowdsale.startTime).toLocaleString(),this.crowdsale.endTime=1e3*(yield c.endTime()).valueOf(),this.crowdsale.endTimeFormatted=new Date(this.crowdsale.endTime).toLocaleString(),this.crowdsale.projectInfo=JSON.parse((yield c.crowdsaleInfo())),this.crowdsale.hasStarted=Date.now()>this.crowdsale.startTime,this.crowdsale.hasEnded=yield c.hasEnded(),this.crowdsale.paused=yield c.paused(),this.token.crowdsaleSupply=this.crowdsale.cap*this.crowdsale.rate,$(".crowdsale-box").toggleClass("d-none"),this.crowdsale.hasEnded&&(this.crowdsale.builder=yield b.crowdsaleCreators(this.crowdsale.address),this.crowdsale.builder===App.web3.eth.accounts[0]&&(this.isCrowdsaleOwner=!0,this.crowdsale.isFinalized=yield c.isFinalized(),!this.crowdsale.isFinalized&&(this.crowdsale.goalReached=yield c.goalReached(),this.crowdsale.goalReached&&(this.crowdsale.round=parseInt((yield c.round()).valueOf()),5>this.crowdsale.round&&(this.crowdsale.nextRoundId=parseInt((yield c.nextRoundId()).valueOf()),0===this.crowdsale.nextRoundId&&(this.restartLink=restartUrl+"?id="+this.crowdsale.id))))))});return function(){return b.apply(this,arguments)}}(),methods:{viewQRCode:function(){if(!this.qrcodeVisible){var a=document.getElementById("crowdsale-qrcode");new QRCode(a,this.crowdsale.address),this.qrcodeVisible=!0}},copyAddress:function(){if(""!==this.wallet&&!this.address_error){document.querySelector("#crowdsale-address").select();try{this.copied=document.execCommand("copy")}catch(a){this.copied=!1}}},fundCrowdsale:function(){var a=_asyncToGenerator(function*(){var a=this;return App.metamask.installed?App.metamask.netId===networkId?void(!App.legacy&&(yield App.web3Provider.enable()),this.$validator.validateAll().then(function(){var b=_asyncToGenerator(function*(b){if(b){var c=yield App.contracts.FriendsFingersCrowdsale.at(a.crowdsaleAddress),d=App.web3.toWei(a.funds);try{a.txHash="",a.makingTransaction=!0;var e=yield c.send(d);console.log(e),a.txHash=e.tx,a.trxLink=App.etherscanLink+"/tx/"+a.txHash}catch(b){alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"),a.makingTransaction=!1,console.log(b)}}else console.log("some errors")});return function(){return b.apply(this,arguments)}}())):void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!"):void alert("To use the invest button please install the MetaMask extension!")});return function(){return a.apply(this,arguments)}}(),finalizeCrowdsale:function(){var a=_asyncToGenerator(function*(){if(!App.metamask.installed)return void alert("To finalize please install the MetaMask extension!");if(App.metamask.netId!==networkId)return void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!");var a=yield App.contracts.FriendsFingersBuilder.at(FriendsFingersBuilderAddress);try{this.txHash="",this.closingCrowdsale=!0;var b=yield a.closeCrowdsale(this.crowdsale.address);console.log(b),this.txHash=b.tx,this.trxLink=App.etherscanLink+"/tx/"+this.txHash}catch(a){alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"),this.closingCrowdsale=!1,console.log(a)}});return function(){return a.apply(this,arguments)}}()},computed:{rate:function(){return this.crowdsale.rate}}})});return function(){return a.apply(this,arguments)}}(),shakaTokenSale:function(){var a=_asyncToGenerator(function*(a){yield App.init(),Vue.use(VeeValidate),new Vue({el:"#crowdsale-details",data:{demo:"1"!==networkId,qrcodeVisible:!1,copied:!1,usAgreement:!1,countryAgreement:!1,globalAgreement:!1,funds:1,txHash:"",trxLink:"",restartLink:"",isCrowdsaleOwner:!1,makingTransaction:!1,closingCrowdsale:!1,authenticated:!0,crowdsale:{ffContract:!0,cap:0,goal:0,weiRaised:0,soldTokens:0,rate:0,startTime:0,endTime:0,hasStarted:!1,hasEnded:!0,paused:!0,projectInfo:{}},token:{crowdsaleSupply:0}},created:function(){var b=_asyncToGenerator(function*(){yield App.initBuilder(),yield App.initCrowdsale(),yield App.initToken();var b=yield App.contracts.FriendsFingersBuilder.at(FriendsFingersBuilderAddress),c=yield App.contracts.FriendsFingersCrowdsale.at(a),d=yield App.contracts.FriendsFingersToken.at((yield c.token()));this.crowdsale.id=1,this.token.address=d.address,this.token.name="Shaka",this.token.symbol="HAK",this.token.decimals=18,this.crowdsale.address=c.address,this.crowdsale.cap=2e3,this.crowdsale.goal=0,this.crowdsale.weiRaised=App.web3.fromWei((yield c.weiRaised())).valueOf(),this.crowdsale.rate=4800,this.crowdsale.soldTokens=App.web3.toWei(this.crowdsale.weiRaised)*this.crowdsale.rate/Math.pow(10,this.token.decimals),this.crowdsale.startTime=1519470000000,this.crowdsale.startTimeFormatted=new Date(this.crowdsale.startTime).toLocaleString(),this.crowdsale.endTime=1521889200000,this.crowdsale.endTimeFormatted=new Date(this.crowdsale.endTime).toLocaleString(),this.crowdsale.projectInfo=JSON.parse((yield c.crowdsaleInfo())),this.crowdsale.hasStarted=Date.now()>this.crowdsale.startTime,this.crowdsale.hasEnded=yield c.hasEnded(),this.crowdsale.paused=yield c.paused(),this.token.crowdsaleSupply=this.crowdsale.cap*this.crowdsale.rate,$(".crowdsale-box").toggleClass("d-none"),this.crowdsale.hasEnded&&(this.crowdsale.builder=yield b.crowdsaleCreators(this.crowdsale.address),this.crowdsale.builder===App.web3.eth.accounts[0]&&(this.isCrowdsaleOwner=!0,this.crowdsale.isFinalized=yield c.isFinalized(),!this.crowdsale.isFinalized&&(this.crowdsale.goalReached=yield c.goalReached(),this.crowdsale.goalReached&&(this.crowdsale.round=parseInt((yield c.round()).valueOf()),5>this.crowdsale.round&&(this.crowdsale.nextRoundId=parseInt((yield c.nextRoundId()).valueOf()),0===this.crowdsale.nextRoundId&&(this.restartLink=restartUrl+"?id="+this.crowdsale.id))))))});return function(){return b.apply(this,arguments)}}(),methods:{viewQRCode:function(){if(!this.qrcodeVisible){var a=document.getElementById("crowdsale-qrcode");new QRCode(a,this.crowdsale.address),this.qrcodeVisible=!0}},copyAddress:function(){if(""!==this.wallet&&!this.address_error){document.querySelector("#crowdsale-address").select();try{this.copied=document.execCommand("copy")}catch(a){this.copied=!1}}},fundCrowdsale:function(){var b=_asyncToGenerator(function*(){var b=this;return App.metamask.installed?App.metamask.netId===networkId?void(!App.legacy&&(yield App.web3Provider.enable()),this.$validator.validateAll().then(function(){var c=_asyncToGenerator(function*(c){if(c){var d=yield App.contracts.FriendsFingersCrowdsale.at(a),e=App.web3.toWei(b.funds);try{b.txHash="",b.makingTransaction=!0;var f=yield d.send(e);console.log(f),b.txHash=f.tx,b.trxLink=App.etherscanLink+"/tx/"+b.txHash}catch(a){alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"),b.makingTransaction=!1,console.log(a)}}else console.log("some errors")});return function(){return c.apply(this,arguments)}}())):void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!"):void alert("To use the invest button please install the MetaMask extension!")});return function(){return b.apply(this,arguments)}}(),finalizeCrowdsale:function(){}},computed:{rate:function(){return this.crowdsale.rate}}})});return function(){return a.apply(this,arguments)}}(),forkTokenSale:function(){var a=_asyncToGenerator(function*(a){yield App.init();var b={"ico/fork-rc":"0x182bb451eef308bfdbf747a575f4d18187c76956","ico/fork-pre-ico":"0xe4cd05f32b9f77988a1279b7f5a361cbf4c66374","ico/fork-ico":"0x911b4707a104d905022d32a89e4d2181cc0cd6d7"}[a];Vue.use(VeeValidate),new Vue({el:"#crowdsale-details",data:{demo:"1"!==networkId,qrcodeVisible:!1,copied:!1,usAgreement:!1,countryAgreement:!1,globalAgreement:!1,funds:1,txHash:"",trxLink:"",restartLink:"",isCrowdsaleOwner:!1,makingTransaction:!1,closingCrowdsale:!1,yourPassword:"",crowdsale:{password:"ico/fork-rc"===a?"FFFORK":"",isTokenCappedCrowdsale:!0,minimumContribution:"ico/fork-rc"===a?1:.1,cap:0,goal:0,weiRaised:0,soldTokens:0,rate:{"ico/fork-rc":1600,"ico/fork-pre-ico":1300,"ico/fork-ico":1e3}[a],startTime:1e3*{"ico/fork-rc":1539616719,"ico/fork-pre-ico":1541458800,"ico/fork-ico":1544914800}[a],endTime:1e3*{"ico/fork-rc":1544828400,"ico/fork-pre-ico":1544828400,"ico/fork-ico":1548802800}[a],hasStarted:!1,hasEnded:!0,paused:!0,projectInfo:{}},token:{crowdsaleSupply:0}},created:function(){var c=_asyncToGenerator(function*(){yield App.initCrowdsale("gastroadvisor/ForkPreIco.json"),yield App.initToken("gastroadvisor/GastroAdvisorToken.json");var c=yield App.contracts.FriendsFingersCrowdsale.at(b),d=yield App.contracts.FriendsFingersToken.at((yield c.token()));this.crowdsale.id=1,this.token.address=d.address,this.token.name="GastroAdvisorToken",this.token.symbol="FORK",this.token.decimals=18,this.crowdsale.address=c.address,this.crowdsale.goal=0,this.crowdsale.weiRaised=App.web3.fromWei((yield c.weiRaised())).valueOf(),this.crowdsale.tokenCap=App.web3.fromWei((yield c.tokenCap())).valueOf(),this.crowdsale.cap=this.crowdsale.tokenCap/this.crowdsale.rate,this.crowdsale.soldTokens=App.web3.fromWei((yield c.soldTokens())).valueOf(),this.crowdsale.startTimeFormatted=new Date(this.crowdsale.startTime).toLocaleString(),this.crowdsale.endTimeFormatted=new Date(this.crowdsale.endTime).toLocaleString(),this.crowdsale.projectInfo={logo:"/img/icos/gastroadvisor/gastroadvisor-logo.jpg",title:"GastroAdvisor",about:"Make your food experience better",description:"GastroAdvisor is building the first global recommendation platform for restaurants and dining venues based on blockchain Ethereum. GastroAdvisor connects restaurants and customers through FORK token, rewarding users for their contributions and creating a reliable platform for informations and reviews of restaurants around the world.",email:"info@gastroadvisor.com",url:"https://www.gastroadvisor.com",whitepaper:"https://www.gastroadvisor.com/whitepaper.pdf",facebook:"https://www.facebook.com/GastroAdvisor",twitter:"https://twitter.com/gastroadvisor",instagram:"https://www.instagram.com/GastroAdvisor_Official_ICO",telegram:"https://t.me/GastroAdvisorOfficial",medium:"https://medium.com/gastroadvisor-official",github:"https://github.com/GastroAdvisor",youtube:"https://www.youtube.com/channel/UCfvle9ZLVsNdzrpp7I4EvhA/featured"},"ico/fork-rc"===a?this.crowdsale.projectInfo.description+="<br><br>Minimum contribution: 1 ETH<br>Bonus:<ul><li>50% >= 1 ETH</li><li>70% >= 2 ETH</li><li>100% >= 5 ETH</li></ul>":"ico/fork-pre-ico"===a?this.crowdsale.projectInfo.description+="<br><br>Minimum contribution: 0.1 ETH<br>Bonus:<ul><li>30%</li></ul>":"ico/fork-ico"==a&&(this.crowdsale.projectInfo.description+="<br><br>Minimum contribution: 0.1 ETH<br>Bonus:<ul><li>20% until 01/01/2019 00:00 GMT+1</li><li>10% until 16/01/2019 00:00 GMT+1</li><li>0% until 30/01/2019 00:00 GMT+1</li></ul>"),this.crowdsale.hasStarted=Date.now()>this.crowdsale.startTime,this.crowdsale.hasEnded=yield c.ended(),this.crowdsale.paused=!1,this.token.crowdsaleSupply=this.crowdsale.tokenCap,$(".crowdsale-box").toggleClass("d-none")});return function(){return c.apply(this,arguments)}}(),methods:{viewQRCode:function(){if(!this.qrcodeVisible){var a=document.getElementById("crowdsale-qrcode");new QRCode(a,this.crowdsale.address),this.qrcodeVisible=!0}},copyAddress:function(){if(""!==this.wallet&&!this.address_error){document.querySelector("#crowdsale-address").select();try{this.copied=document.execCommand("copy")}catch(a){this.copied=!1}}},fundCrowdsale:function(){var a=_asyncToGenerator(function*(){var a=this;return App.metamask.installed?App.metamask.netId===networkId?void(!App.legacy&&(yield App.web3Provider.enable()),this.$validator.validateAll().then(function(){var c=_asyncToGenerator(function*(c){if(c){var d=yield App.contracts.FriendsFingersCrowdsale.at(b),e=App.web3.toWei(a.funds);try{a.txHash="",a.makingTransaction=!0;var f=yield d.send(e);console.log(f),a.txHash=f.tx,a.trxLink=App.etherscanLink+"/tx/"+a.txHash}catch(b){alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"),a.makingTransaction=!1,console.log(b)}}else console.log("some errors")});return function(){return c.apply(this,arguments)}}())):void alert("Your MetaMask extension in on the wrong network. Please switch on "+networkName+" and try again!"):void alert("To use the invest button please install the MetaMask extension!")});return function(){return a.apply(this,arguments)}}(),finalizeCrowdsale:function(){console.log("does nothing")}},computed:{authenticated:function(){return!this.crowdsale.password||this.crowdsale.password&&this.yourPassword.toLowerCase()===this.crowdsale.password.toLowerCase()},rate:function(){if("ico/fork-rc"===a){if(5<=this.funds)return this.crowdsale.rate+100*this.crowdsale.rate/100;return 2<=this.funds?this.crowdsale.rate+70*this.crowdsale.rate/100:1<=this.funds?this.crowdsale.rate+50*this.crowdsale.rate/100:0}return"ico/fork-ico"===a?1546297200000>Date.now()?this.crowdsale.rate+20*this.crowdsale.rate/100:1547593200000>Date.now()?this.crowdsale.rate+10*this.crowdsale.rate/100:this.crowdsale.rate:this.crowdsale.rate}}})});return function(){return a.apply(this,arguments)}}()};(function(a){"use strict";var b=0;"bounty-program"===page?App.bountyProgram():"shaka-token-sale"===page?App.shakaTokenSale(FriendsFingersTokenSaleAddress):"ico/fork-rc"===page||"ico/fork-pre-ico"===page||"ico/fork-ico"===page?App.forkTokenSale(page):"crowdsale-builder-demo"===page?(App.setTestnet(),App.builder()):"crowdsale-demo"===page?(App.setTestnet(),b=getParam("id"),a.isNumeric(b)?App.viewCrowdsale(b):window.location.href=window.location.origin+"/not-found"):"restart-crowdsale-demo"===page?(App.setTestnet(),b=getParam("id"),a.isNumeric(b)?App.restart(b):window.location.href=window.location.origin+"/not-found"):"crowdsale-builder"===page?App.builder():"crowdsale"===page?(b=getParam("id"),a.isNumeric(b)?App.viewCrowdsale(b):window.location.href=window.location.origin+"/not-found"):"restart-crowdsale"===page?(b=getParam("id"),a.isNumeric(b)?App.restart(b):window.location.href=window.location.origin+"/not-found"):""===page?App.home(FriendsFingersTokenSaleAddress):void 0})(jQuery);function getParam(a){var b={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(a,c,d){b[c]=void 0===d?"":d}),a?b[a]?b[a]:null:b}